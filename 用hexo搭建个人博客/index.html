<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>知行合一 | 用 Hexo 搭建博客 | Sexy XG Online Update Blog</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-time">2018-09-08</div></div></div><div class="container post-header"><h1>知行合一 | 用 Hexo 搭建博客</h1></div><div class="container post-content"><p>这会是一篇很长的教程。其实，介绍 Hexo 在 Github 上搭建博客的教程汗牛充栋，之所以还要继续这一项重复的工作，主要是我心中对理想的技术博客文章有两点期盼：</p>
<ul>
<li><p>技术博客不仅仅是操作手册，不仅要告诉读者如何做，还要告诉读者为何要这么做；</p>
</li>
<li><p>消除神秘性，在博客文章中给出的信息都应该提供参考资料，且最好是官方文档，信息的准确性不会经过 N 手转述而打折。</p>
</li>
</ul>
<p>这一篇文章，是我的一次尝试。本文一共 6 个部分，第 1 章，在具体动手之前，先要思考一下整个 Hexo 建站过程一共可以分为几个模块，每个模块涉及到的各个工具扮演的究竟是什么角色。第 2 章，我们正式进入到操作阶段，讲述 Hexo 在本地建站。第 3 章是关于如何把本地建好的网站部署到 Github Pages 上去。第 4 章，介绍如何绑定独立域名。最后两章，分别介绍身为作者如何获得更好的写作体验，以及如何让读者获得更好的访客体验。</p>
<h2 id="1-动手前的思考"><a href="#1-动手前的思考" class="headerlink" title="1. 动手前的思考"></a>1. 动手前的思考</h2><p>在看这篇文章之前，也许你已经看过不少关于 Hexo 和 Github 搭建博客的文章了，那你肯定见过这些：Hexo、Github Pages、SSH 配置、域名解析、A 记录、CNAME。这些究竟是什么东西？一下子都灌输给我，头好晕。别担心，这一章就是先帮我们理清思路的。</p>
<h3 id="1-1-模块划分"><a href="#1-1-模块划分" class="headerlink" title="1.1 模块划分"></a>1.1 模块划分</h3><p>上面提到的 Hexo、Github Pages、SSH 配置、域名解析、A 记录、CNAME，那么多名词，都是由完全不认识的人创造、负责管理的，所以每个名词所代表的背后的服务之间的耦合度是非常低的。这里，我根据访问网址的不同，将利用 Hexo 和 Github Pages 搭建博客的流程一共分为如下 3 大模块：</p>
<ul>
<li><p><strong>Hexo 本地建站</strong>：这一模块利用 Hexo 在本地（你的电脑）内生成你的网站，可以通过 <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> 来查看最后生成的网站;</p>
</li>
<li><p><strong>部署到 Github Pages</strong>：这一模块介绍 Github Pages 服务以及利用 Hexo 将上一模块中生成的网站部署到 Github 服务器，从而可以通过 your_name.github.io 访问你新建的博客。其中，your_name 是你 Github 的用户名；</p>
</li>
<li><p><strong>绑定独立域名</strong>：这一模块介绍如何绑定自己购买的独立域名，从而可以通过自己购买的网址访问自己的网站，如果没有购买独立域名的打算，这一模块可以不用进行。</p>
<h3 id="1-2-关键词解释"><a href="#1-2-关键词解释" class="headerlink" title="1.2 关键词解释"></a>1.2 关键词解释</h3><p>Hexo、Github Pages、SSH 配置、域名解析、A 记录、CNAME 这些名词究竟代表了什么？为了不至于在后面的操作阶段懵逼，这里，我们先来打点预防针。</p>
</li>
<li><p><strong>Hexo</strong>：Hexo 是一款静态博客生成器。静态的意思是指生成的博客网站访客只能浏览，没法像淘宝那样在我们的网站上提交信息。Hexo 负责把我们写的 Markdown 文件根据选定的主题（规定网站的外观样式的文件）生成一堆 HTML 以及负责外观样式的 CSS 和 Javascript 文件。此外，Hexo 还提供了帮我们把这一堆 HTML、CSS、Javascript 文件上传到 Github 服务器的功能，也就是部署。</p>
</li>
<li><p><strong>Github Page</strong>：我们平时在新浪上看新闻的时候，所有的东西都要从新浪服务器发送到我们的手机、电脑上。我们的网站也一样，需要一个服务器，把用 Hexo 生成的那些 HTML、CSS、Javascript 文件发送给访客。但我们自己没有服务器呀？Github Pages 是 Github 提供的一项免费的静态页面托管服务，提供 your_name.github.io 的域名（your_name 为你的 Github 用户名）发布自己的静态网站。我们把 Hexo 生成的内容上传到 Github 服务器，访客的浏览器就是从 Github 服务器获取相关文件的。</p>
</li>
</ul>
<h2 id="2-Hexo-本地建站"><a href="#2-Hexo-本地建站" class="headerlink" title="2. Hexo 本地建站"></a>2. Hexo 本地建站</h2><h3 id="2-1-安装-Hexo"><a href="#2-1-安装-Hexo" class="headerlink" title="2.1 安装 Hexo"></a>2.1 安装 Hexo</h3><p>根据 Hexo 的官方文档 <a href="http://hexo.io/zh-cn/docs/index.html" target="_blank" rel="noopener">开始使用 — 概述</a>，安装 Hexo 的前提是先安装 <a href="https://nodejs.org/zh-cn/" title="Node.js" target="_blank" rel="noopener">Node.js</a> 和 <a href="https://git-scm.com/download" title="Git" target="_blank" rel="noopener">Git</a> ，再安装完这两者后，安装 Hexo 很简单，只需在终端（cmd、Git bash、Node.js command prompt 均可）中敲入如下命令，回车等待安装完成。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<h3 id="2-2-建立站点"><a href="#2-2-建立站点" class="headerlink" title="2.2 建立站点"></a>2.2 建立站点</h3><ul>
<li><p><strong>Step 1</strong>: 先在电脑中的某一位置建立好 your_name.github.io 文件夹，比如 D:\Blog\your_name.github.io；</p>
</li>
<li><p><strong>Step 2</strong>: 在终端中切换到 your_name.github.io 文件夹所在的路径。需要注意的是，在 Windows 中，如果要进入某个磁盘，不需要敲 cd，直接敲盘符即可。比如我要进入 D:\Blog\your_name.github.io，那就输入 D: 回车，然后再 cd Blog\your_name.github.io；</p>
</li>
<li><p><strong>Step 3</strong>: 由于默认的 NPM 镜像实在太慢太慢，我们把源替换成淘宝的镜像，在终端中执行如下命令：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry &quot;https://registry.npm.taobao.org&quot;</span><br></pre></td></tr></table></figure>
<p>需要注意的是，这一次切换是暂时的，如果下回从 npm 下载一些东西还是觉得非常慢，记得再执行一次这一条命令。</p>
<ul>
<li><strong>Step 4</strong>: 根据 Hexo 的官方文档 <a href="https://hexo.io/zh-cn/docs/setup.html" target="_blank" rel="noopener">开始使用 — 建站</a>，依次执行下面两条命令，建立我们的新网站：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo init  </span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>换了淘宝的镜像后，应该能在几分钟内完成。完成后，your_name.github.io 文件夹下面的目录如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure>
<ol>
<li><code>config.yml</code>文件存放着网站的配置信息，可以在这里配置大部分的参数。</li>
<li><code>package.json</code>文件存放着插件信息，从中可以查看那些插件已经安装。</li>
<li><code>scaffolds</code> 是模板文件夹，新建文章时，Hexo 会根据 caffold 来建 立文件，不过这个模板和后面的主题里指的模板不一样。</li>
<li><code>source</code> 是存放用户资源的地方的文件夹，除_posts 文件夹外， 开头命名为 _ (下划线) 的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹（别急，等下会生成的），而其他文件会被拷贝过去。</li>
<li><code>themes</code> 主题文件夹，Hexo 会根据主题来生成静态页面，我们以后自己安装的主题也都会放在这个文件夹下面，默认的 landscape 主题已经在里面了。</li>
</ol>
<ul>
<li><strong>Step 5</strong>: 根据 Hexo 的官方文档<a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="noopener">开始使用 — 命令</a>，在终端中敲入<code>hexo server</code> 命令（确保路径仍在 <code>your_name.github.io</code> 下），可以在 <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> 中看到我们网站默认的样子了。</li>
</ul>
<h3 id="2-3-配置站点"><a href="#2-3-配置站点" class="headerlink" title="2.3 配置站点"></a>2.3 配置站点</h3><p>在 <code>_config.yml</code> 中，我们可以修改大部份的配置，里面每一个参数的含义可以查看 Hexo 的官方文档<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="noopener">开始使用 — 配置</a> ，这里我暂且只修改了 <code>title</code>，<code>subtitle</code> 和 <code>author</code>，替换成自己网站的名字和作者名即可。另外，我觉得默认的网址链接有点长，将 <code>permalink</code> 改成如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">permalink: :title/</span><br></pre></td></tr></table></figure>
<p><code>per_page</code>决定首页显示多少篇文章，默认的 10 篇有点多，我改成了 5 篇。其余的设置，比如 theme，deploy 我们回头用到了再来更改。</p>
<p>2.4 生成自己的内容<br>在 _posts 文件夹下，新建一个 Markdown 文件，或者把你以前有的 Markdown 文件复制进来，根据 Hexo 的官方文档 <a href="https://hexo.io/zh-cn/docs/front-matter.html" target="_blank" rel="noopener">基本操作 — Front-matter</a> ，写好你的第一篇文章，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">title: Test for Hexo</span><br><span class="line">date: 2016/12/7 20:46:25</span><br><span class="line">categories:</span><br><span class="line">- Diary</span><br><span class="line">tags:</span><br><span class="line">- PS3</span><br><span class="line">- Games</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Hexo Test.</span><br></pre></td></tr></table></figure>
<p>这里，Front-matter 是文件最上方以 <code>---</code> 分隔的区域，用于指定文章的标题、建立日期、更新日期等，如果主题模板还支持分类和标签的话（比如默认的 landscape 主题），还可以指定分类和标签。根据 Hexo 的官方文档<a href="https://hexo.io/zh-cn/docs/generating.html" target="_blank" rel="noopener">基本操作 — 生成文件</a>，在终端中敲入如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure>
<p>Hexo 会替我们刚加入到 <code>_posts</code> 文件夹下的 markdown 文件生成静态文件。运行 <code>hexo server</code> 可以在 <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> 中看到我们新添加的网页内容了。至此，我们采用默认主题 landscape 的网站已经生成了，且相信你已经掌握了关于 Hexo 的大部分操作，如果自感还不熟悉，可以再看看 Hexo 的官方文档 <a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="noopener">开始使用 — 命令</a>，主要是下面几个命令：</p>
<p><code>hexo init [folder]</code>: 新建一个网站。如果没有设置 <br><br><code>folder</code> ，Hexo 默认在目前的文件夹建立网站；<br><br><code>hexo generate</code>: 生成静态文件；<br><br><code>hexo server</code>: 启动服务器。默认情况下，访问网址为： <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a>；<br><br><code>hexo deploy</code>: 部署网站（后文会用得）；<br><br><code>hexo clean</code>: 清除缓存文件 (<code>db.json</code>) 和 <code>public</code> 文件夹下已生成的静态文件。<br></p>
<h3 id="2-5-更换主题"><a href="#2-5-更换主题" class="headerlink" title="2.5 更换主题"></a>2.5 更换主题</h3><p>如果觉得默认的 landscape 并不是自己最喜欢的那一款，我们可以去 <a href="https://hexo.io/themes/" target="_blank" rel="noopener">Themes | Hexo</a> 中挑选喜欢的主题。就我个人而言，最喜欢的是 <a href="http://lotabout.me/hexo-theme-noise/" target="_blank" rel="noopener">Noise</a> 这个主题，下面就以 Noise 为例。</p>
<ul>
<li><p><strong>Step 1</strong>: 在 Demo 页面上找到该主题的 Github 主页，比如 Noise 就是在其页底的 Theme noise 字样上。如果没找到，可以在 Github 上的 <a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="noopener">hexo - Wiki - Themes</a> 中搜索对应主题名，<a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="noopener">hexo - Wiki - Themes</a> 整理了每个 Hexo 主题的 项目主页 和 Demo 网址；</p>
</li>
<li><p><strong>Step 2</strong>: 根据 <a href="https://github.com/lotabout/hexo-theme-noise" target="_blank" rel="noopener">Noise 主页</a> 上的文档，我们需要先安装主题和渲染器：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/lotabout/hexo-theme-noise themes/noise</span><br><span class="line">npm install hexo-renderer-less --save</span><br><span class="line">npm install hexo-renderer-jade --save</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Step 3</strong>: 根据 <a href="https://github.com/lotabout/hexo-theme-noise" target="_blank" rel="noopener">Noise 主页</a> 上的文档，将 <code>your_name.github.io/_config.yml</code> 中的 <code>theme</code> 的值由原来默认的 <code>landscape</code> 改为 <code>noise</code> 。</li>
</ul>
<p>至此，主题已经更换完成，依次运行<code>hexo clean</code>, <code>hexo generate</code>, <code>hexo server</code> 我们可以在 <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> 上查看我们网站新的样式。根据 <a href="https://github.com/lotabout/hexo-theme-noise" target="_blank" rel="noopener">Noise 主页</a> 上的文档，我们还可以进一步的配置该主题，不过这内容就扯开去了。过段时间，我会专门写一篇文章关于 Noise 主题的配置、对 LaTeX 的支持和访问速度的优化，敬请期待。更换其他主题的操作与此基本相同，不再赘述。</p>
<h2 id="3-部署到-Github"><a href="#3-部署到-Github" class="headerlink" title="3. 部署到 Github"></a>3. 部署到 Github</h2><p>部署到 Github 的命令行操作都在 Git Bash 中完成。也许黑黢黢的命令行、陌生的 SSH 和 git 会让你有点害怕，请不要担心，下面的所有操作都来源于 Github Pages 和 Hexo 的官方文档，且我会解释每一步究竟是干什么的，以及为何要这么做。</p>
<p>事实上，这一环节非常简单，其实本质上就是一个 <code>git push</code> 操作，只不过我们要 <code>push</code> 的这个项目的名字比较特殊，刚好是 <code>your_name.github.io</code> 而已。根据 Github 的官方文档 <a href="https://help.github.com/articles/set-up-git/" target="_blank" rel="noopener">Set Up Git</a>，我们可以把这一环节分为 4 个流程，第一步建立一个名为 <code>your_name.github.io</code> 的 repository，第二步设置 Git（<a href="https://help.github.com/articles/set-up-git/#setting-up-git" target="_blank" rel="noopener">Setting up Git</a>），第三步从 Git 与 Github 进行身份验证（<a href="https://help.github.com/articles/set-up-git/#next-steps-authenticating-with-github-from-git" target="_blank" rel="noopener">Authenticating with GitHub from Git</a>）， 最后一部上传项目也就是 Hexo 部署我们的站点。</p>
<h3 id="3-1-Creating-a-repository"><a href="#3-1-Creating-a-repository" class="headerlink" title="3.1 Creating a repository"></a>3.1 Creating a repository</h3><p>要在 Github 上创建项目，当然首先需要注册<a href="https://github.com/" target="_blank" rel="noopener">Github帐号</a>。在注册完成后，Github 的官方文档 <a href="https://help.github.com/articles/create-a-repo/#create-a-new-repository-on-github" target="_blank" rel="noopener">Create a new repository on GitHub</a> 已经图文并茂将如何建立一个 repository 交待得非常清楚明白了，唯一要注意的是，第二步里的 Repository name 一定要是 <code>your_name.github.io</code>，<code>your_name</code> 是你的 Github 用户名。</p>
<h3 id="3-2-Setting-up-Git"><a href="#3-2-Setting-up-Git" class="headerlink" title="3.2 Setting up Git"></a>3.2 Setting up Git</h3><p>根据 Github 的官方文档 <a href="https://help.github.com/articles/set-up-git/#setting-up-git" target="_blank" rel="noopener">Setting up Git</a>，这一操作的目的是 Tell Git your name so your commits will be properly labeled 和 Tell Git the email address that will be associated with your Git commits，也就是告诉版本控制软件 Git 接下来这台电脑上提交的文件是 E-mail 地址是什么的谁谁谁提交的。在 Git Bash 中执行如下代码即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;YOUR NAME&quot;</span><br><span class="line">git config --global user.email &quot;YOUR EMAIL ADDRESS&quot;</span><br></pre></td></tr></table></figure>
<p>其中，<code>YOUR NAME</code>是自己取的名字，<code>YOUR EMAIL ADDRESS</code> 是自己的邮箱。由于自己的博客网站就自己一个人提交，所以就都设置成跟 Github 用户名和邮箱相同了。但其实是可以不同的，因为对于很多项目，并不只有一个开发者，Github 允许多人向同一个 Repo 提交，这里提供用户名和邮箱，只是为了搞清楚哪些代码是谁谁谁提交的。</p>
<h3 id="3-3-Authenticating-with-GitHub-from-Git"><a href="#3-3-Authenticating-with-GitHub-from-Git" class="headerlink" title="3.3 Authenticating with GitHub from Git"></a>3.3 Authenticating with GitHub from Git</h3><p>这一整章，我们的最终目的是实现在终端中敲入 <code>hexo deploy</code> 后，Hexo 会将我们本地的 <code>publi</code>c 文件夹下的东西上传到 Github 服务器，这样我们就可以通过 <code>your_name.github.io</code> 这个域名（<code>your_name</code> 是你的 Github 用户名）看到我们已经上网的博客网站了。为了实现这个目的，首先我们先要让本地的电脑和 Github 服务器建立起某种联系，也就是让 Github 服务器信任由我这台电脑提交的东西，接受，并存放到 <code>your_name.github.io</code> 这个 Repo 下面，与 Github 服务器建立信任的这个环节就是身份认证（Authenticating ）。根据 Github 的官方文档 <a href="https://help.github.com/articles/set-up-git/#next-steps-authenticating-with-github-from-git" target="_blank" rel="noopener">Authenticating with GitHub from Git</a> 这里，我们选择 <a href="https://help.github.com/articles/set-up-git/#connecting-over-ssh" target="_blank" rel="noopener">Connecting over SSH</a> 这一种方式。在 Github 的官方文档 <a href="https://help.github.com/categories/authenticating-to-github/" target="_blank" rel="noopener">Categories / SSH</a> 下，我们能找到关于 Github 与 SSH 的资料。</p>
<h4 id="3-3-1-生成新的-SSH-key"><a href="#3-3-1-生成新的-SSH-key" class="headerlink" title="3.3.1 生成新的 SSH key"></a>3.3.1 生成新的 SSH key</h4><p>根据 Github 的官方文档 <a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#generating-a-new-ssh-key" target="_blank" rel="noopener">Generating a new SSH key</a> ， 我们在 Git Bash 下执行如下命令，生成 SSH key</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</span><br></pre></td></tr></table></figure>
<p>其中，<a href="mailto:``your_email@example.com" target="_blank" rel="noopener">``your_email@example.com</a><code></code> 是你的 Github 注册邮箱。然后，Git Bash 中会出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br></pre></td></tr></table></figure>
<p>表示新的 SSH 已经生成了。随后会出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter a file in which to save the key</span><br><span class="line">(/Users/you/.ssh/id_rsa): [Press enter]</span><br></pre></td></tr></table></figure>
<p>这里 <code>id_rsa</code> 是生成的 key 文件的文件名，默认都是这个；如果不是，在后面用到 <code>id_rsa</code> 的地方请替换成出现的名字。这条信息是让你选择 SSH key 存放的地点，按回车选择默认的即可。回车后，还会出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty for no passphrase): [Type a passphrase]</span><br><span class="line">Enter same passphrase again: [Type passphrase again]</span><br></pre></td></tr></table></figure>
<p>让你设置使用 SSH 密钥时的密码，由于我们都是在自己个人的电脑上操作，所以仍然回车，不设置密码即可。</p>
<h4 id="3-3-2-将-SSH-key-添加到-ssh-agent"><a href="#3-3-2-将-SSH-key-添加到-ssh-agent" class="headerlink" title="3.3.2 将 SSH key 添加到 ssh-agent"></a>3.3.2 将 SSH key 添加到 ssh-agent</h4><p>根据 <a href="https://en.wikipedia.org/wiki/Ssh-agent" target="_blank" rel="noopener">Wikipedia</a>，<a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent" target="_blank" rel="noopener">ssh-agent</a> 是一个在本地登录会话持续时间内，将未加密的密钥存储在内存中，并使用 Unix 域套接字与 SSH 客户端进行通信的程序。根据 Github 的官方文档 <a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent" target="_blank" rel="noopener">Adding your SSH key to the ssh-agent</a> ， 我们在 Git Bash 下执行如下命令，开启 ssh-agent</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eval &quot;$(ssh-agent -s)&quot;</span><br></pre></td></tr></table></figure>
<p>然后我们要将这个 SSH key 添加到 ssh-agent 里去，运行如下命令，其中 <code>id_rsa</code> 是你的 key 文件的文件名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-add ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure>
<h4 id="3-3-3-将-SSH-key-添加到-Github-账户"><a href="#3-3-3-将-SSH-key-添加到-Github-账户" class="headerlink" title="3.3.3 将 SSH key 添加到 Github 账户"></a>3.3.3 将 SSH key 添加到 Github 账户</h4><p>Github 的官方文档 <a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent" target="_blank" rel="noopener">Adding your SSH key to the ssh-agent</a>已经图文并茂将如何在 Github</p>
<p>帐号中添加 SSH 介绍的非常清楚了。先是在 Git Bash 中将 SSH Key 拷贝出来：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ clip &lt; ~/.ssh/id_rsa.pub</span><br><span class="line"># Copies the contents of the id_rsa.pub file to your clipboard</span><br></pre></td></tr></table></figure>
<p><code>id_rsa</code> 是你刚才的 SSH Key 文件。此时，SSH Key 已经在我们的剪切板里了。然后登录 Github 帐号，依次点击自己的头像，<strong>Settings</strong>，<strong>SSH and GPG keys</strong>，<strong>New SSH key</strong> 或者 <strong>Add SSH key</strong>， 在 <strong>Title</strong> 这里输入 <strong>Key</strong> 的 <strong>label</strong>，比如 <code>your_name - PC</code>，然后在 Key 里面把 <strong>SSH Key</strong> 粘贴进去，点击 <strong>Add SSH key</strong> 大功告成。</p>
<p>回想一下，操作了那么多 SSH 相关的命令，我们在干嘛？个人的理解，就是在生成身份认证的凭证 SSH key，分别放在自己本地电脑和 Github 服务器上，以后向 Github 提交内容的时候，两者的 Key 匹配就可以了，省去了我们每次输密码的时间。</p>
<h4 id="3-3-4-测试-SSH-连接"><a href="#3-3-4-测试-SSH-连接" class="headerlink" title="3.3.4 测试 SSH 连接"></a>3.3.4 测试 SSH 连接</h4><p>在大功告成之前，为了稳妥起见，我们来测试一下自己跟 Github 服务器 SSH 连接是否已经建立起来了。Github 的官方文档 <a href="https://help.github.com/articles/testing-your-ssh-connection/" target="_blank" rel="noopener">Testing your SSH connection</a> 已经将次环节介绍得非常详细了。我们要做得就是在 Git Bash 中敲入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>
<p>你可能会看到类似于</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The authenticity of host &apos;github.com (192.30.252.1)&apos; can&apos;t be established.</span><br><span class="line">RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)?</span><br></pre></td></tr></table></figure>
<p>没关系的，输入 yes 敲回车，就可以看到如下的成功信息了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hi username! You&apos;ve successfully authenticated, but GitHub does not</span><br><span class="line">provide shell access.</span><br></pre></td></tr></table></figure>
<p>至此为止，我们已经建立起了跟 Github 服务器的连接。其实我们也可以用 git push 命令，提交 public 文件夹下面的内容，不过 Hexo 更我们提供了更方便的途径。</p>
<h3 id="3-4-Hexo-部署"><a href="#3-4-Hexo-部署" class="headerlink" title="3.4 Hexo 部署"></a>3.4 Hexo 部署</h3><p>Hexo 提供了 <code>hexo deploy</code> 命令，可以方便地将整个 <code>public</code> 文件夹部署到 Github 服务器上去。根据 Hexo 的官方文档 <a href="https://hexo.io/zh-cn/docs/deployment.html" target="_blank" rel="noopener">基本操作 — 部署</a> 我们只需要做以下两步：</p>
<ul>
<li><strong>Step 1</strong>: 在终端中运行如下命令，安装 <code>hexo-deployer-git</code> 插件：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Step 2</strong>: 在 _config.yml 中修改参数，如下所示：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/your_name/your_name.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>其中，your_name 是你的 Github 帐号名。<code>repo</code> 对应的是你 <code>your_name.github.io</code> 这个项目的库（Repository）地址，进入这个项目的主页，点击 <strong>Clone or download</strong> 下拉菜单也能看到。<code>branch</code> 是分支名称，如果使用的是 GitHub 或 GitCafe 的话，程序会尝试自动检测，通常都是<code>master</code>。 <strong>注意，冒号后的空格非常重要，一定要有！</strong></p>
<p>至此，在终端执行 <code>hexo deploy</code> 命令，就可以把我们的网站部署到 Github 服务器上。在第一次部署的时候，Github 还会跳出来一个小窗口，让你输入 Github 帐号和密码，输入即可。根据不少网友的说法以及我之前搭站的经验，等待 15 分钟的样子，就可以通过 your_name.github.io （your_name 是你的 Github 用户名）来访问自己的网站了。如果等了很久还没动静，或者想立刻看到效果，该怎么破？别急，请看下一小节。</p>
<h3 id="3-4-部署了，没动静怎么办？"><a href="#3-4-部署了，没动静怎么办？" class="headerlink" title="3.4 部署了，没动静怎么办？"></a>3.4 部署了，没动静怎么办？</h3><p>博客第一次创建，即使 deploy 成功了，但仍然不会立刻可以访问，还需要等待 15 分钟以上。以前我也用 Github Pages 建过博客，都是等一会就好，不过这一次我没有等到。过了两个钟头，还是无法访问。有点急了，我是如下搞定的。</p>
<ul>
<li><strong>Step 1</strong>: 到 your_name.github.io 项目的 Github 主页，网址形如 <a href="https://github.com/your_name/your_name.github.io" target="_blank" rel="noopener">https://github.com/your_name/your_name.github.io</a> ，上方最右侧有一个 <strong>Settings</strong>，点击 <strong>Settings</strong>，拉到 <strong>GitHub Pages</strong>，有一个<strong>Launch automatic page generator</strong>，点击后，再点击<strong> Continue to layouts</strong>，最后点击 <strong>Publish page</strong>，马上就可以看到 your_name.github.io 可以访问了，但样式是是刚刚默认的，跟我们本地的不一样，内容也没有我们自己上传的内容。</li>
<li><strong>Step 2</strong>: 再试着 <code>hexo deploy</code> 一次，如果页面正常了那就大功告成了，假使遇到 Permission Denied，再 <code>hexo deploy</code> 一次就好。</li>
</ul>
<h2 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h2><p>最后，感谢您一直阅读到这里，如果我的文章有错误或不足之处，请务必在评论中留言指出，千万不用客气，万分感谢~</p>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>